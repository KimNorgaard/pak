<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>File: README.rdoc [RDoc Documentation]</title>

  <link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet" />

  <script src="./js/jquery.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="./js/thickbox-compressed.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="./js/quicksearch.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="./js/darkfish.js" type="text/javascript"
    charset="utf-8"></script>
</head>

<body class="file">
  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="./CHANGELOG_rdoc.html">CHANGELOG.rdoc</a></li>
        
          <li class="file"><a href="./Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./MIT-LICENSE.html">MIT-LICENSE</a></li>
        
          <li class="file"><a href="./README_rdoc.html">README.rdoc</a></li>
        
          <li class="file"><a href="./Rakefile.html">Rakefile</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class Index
          <span class="search-toggle"><img src="./images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="./PAK.html">PAK</a></li>
        
          <li><a href="./PAK/ValidatesHostname.html">PAK::ValidatesHostname</a></li>
        
          <li><a href="./PAK/ValidatesHostname/DomainnameValidator.html">PAK::ValidatesHostname::DomainnameValidator</a></li>
        
          <li><a href="./PAK/ValidatesHostname/FqdnValidator.html">PAK::ValidatesHostname::FqdnValidator</a></li>
        
          <li><a href="./PAK/ValidatesHostname/HostnameValidator.html">PAK::ValidatesHostname::HostnameValidator</a></li>
        
          <li><a href="./PAK/ValidatesHostname/WildcardValidator.html">PAK::ValidatesHostname::WildcardValidator</a></li>
        
          <li><a href="./Record.html">Record</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    
<h1>ValidatesHostname</h1>
<ul><li>
<p>Source: <a
href="https://github.com/KimNorgaard/validates_hostname">github.com/KimNorgaard/validates_hostname</a></p>
</li><li>
<p>Bugs:   <a
href="https://github.com/KimNorgaard/validates_hostname/issues">github.com/KimNorgaard/validates_hostname/issues</a></p>
</li></ul>

<h2>Description</h2>

<p>Extension to ActiveRecord::Base for validating hostnames and domain names.</p>

<h2>Features</h2>
<ul><li>
<p>Adds validation for hostnames to ActiveModel</p>
</li><li>
<p>Supports I18n for the error messages</p>
</li></ul>

<h2>Installation</h2>

<p>As plugin (from master)</p>

<pre>rails plugin install git://github.com/KimNorgaard/validates_hostname.git</pre>

<p>As gem</p>

<pre># in Gemfile
gem 'validates_hostname', '-&gt; 1.0.0'

# Run bundler
$ bundle install</pre>

<h2>Validations performed</h2>
<ul><li>
<p>maximum length of hostname is 255 characters</p>
</li><li>
<p>maximum length of each hostname label is 63 characters</p>
</li><li>
<p>characters allowed in hostname labels are a-z, A-Z, 0-9 and hyphen</p>
</li><li>
<p>labels do not begin or end with a hyphen</p>
</li><li>
<p>labels do not consist of numeric values only</p>
</li></ul>

<h2>Options</h2>
<ul><li>
<p>option to allow for underscores in hostname labels</p>
</li><li>
<p>option to require that the last label is a valid TLD (ie. require that the
name is a FQDN)</p>
</li><li>
<p>option to allow numeric values in the first label of the hostname
(exception: the hostname cannot consist of a single numeric label)</p>
</li><li>
<p>option to specify a list of valid TLDs</p>
</li><li>
<p>options to allow for wildcard hostname in first label (for use with DNS)</p>
</li></ul>

<p>See also <a
href="http://www.zytrax.com/books/dns/apa/names.html">www.zytrax.com/books/dns/apa/names.html</a></p>

<h2>How to use</h2>

<p>Simple usage</p>

<pre>class Record &lt; ActiveRecord::Base
  validates :name, :hostname =&gt; true
end</pre>

<p>With options</p>

<pre>class Record &lt; ActiveRecord::Base
  validates :name, :hostname =&gt; { OPTIONS }
end</pre>

<h2>Options and their defaults:</h2>
<ul><li>
<p>:allow_underscore =&gt; false</p>
</li><li>
<p>:require_valid_tld =&gt; false</p>
</li><li>
<p>:valid_tlds =&gt; Array of allowed TLDs (can only be used with
:require_fqdn =&gt; true)</p>
</li><li>
<p>:allow_numeric_hostname =&gt; false</p>
</li></ul>

<h2>Examples</h2>

<p>Without options</p>

<pre>class Record &lt; ActiveRecord::Base
  validates :host, :hostname =&gt; true
end

&gt;&gt; @record = Record.new :name =&gt; 'horse'
&gt;&gt; @record.save
=&gt; true

&gt;&gt; @record2 = Record.new :name =&gt; '_horse'
&gt;&gt; @record2.save
=&gt; false</pre>

<p>With :allow_underscore</p>

<pre>class Record &lt; ActiveRecord::Base
  validates :name, :hostname =&gt; { :allow_underscore =&gt; true }
end

&gt;&gt; @record3 = Record.new :name =&gt; '_horse'
&gt;&gt; @record3.save
=&gt; true</pre>

<p>With :require_valid_tld</p>

<pre>class Record &lt; ActiveRecord::Base
  validates :name, :hostname =&gt; { :require_valid_tld =&gt; true }
end

&gt;&gt; @record4 = Record.new :name =&gt; 'horse'
&gt;&gt; @record4.save
=&gt; false

&gt;&gt; @record5 = Record.new :name =&gt; 'horse.com'
&gt;&gt; @record5.save
=&gt; true</pre>

<p>With :valid_tlds</p>

<pre>class Record &lt; ActiveRecord::Base
  validates :name, :hostname =&gt; { :require_valid_tld, :valid_tlds =&gt; %w(com org net) }
end

&gt;&gt; @record6 = Record.new :name =&gt; 'horse.info'
&gt;&gt; @record6.save
=&gt; false</pre>

<p>With :allow_numeric_hostname</p>

<pre>class Record &lt; ActiveRecord::Base
  validates :name, :hostname =&gt; { :allow_numeric_hostname =&gt; false }
end

&gt;&gt; @record7 = Record.new :name =&gt; '123.info'
&gt;&gt; @record7.save
=&gt; false</pre>

<p>With :allow_wildcard_hostname</p>

<pre>class Record &lt; ActiveRecord::Base
  validates :name, :hostname =&gt; { :allow_wildcard_hostname =&gt; true }
end

&gt;&gt; @record8 = Record.new :name =&gt; '*.123.info'
&gt;&gt; @record8.save
=&gt; true</pre>

<h2>Extra validators</h2>

<p>A few extra validators are included.</p>

<h3>domainname</h3>
<ul><li>
<p>sets require_valid_tld       =&gt; true</p>
</li><li>
<p>sets allow_numeric_hostname  =&gt; true</p>
</li><li>
<p>returns error if there is only one label and this label is numeric</p>
</li></ul>

<h3>fqdn</h3>
<ul><li>
<p>sets require_valid_tld       =&gt; true</p>
</li></ul>

<h3>wildcard</h3>
<ul><li>
<p>sets allow_wildcard_hostname =&gt; true</p>
</li></ul>

<h2>Error messages</h2>

<p>Using the I18n system to define new defaults:</p>

<pre>en:
  errors:
    messages:
      invalid_label_length: &quot;label must be between 1 and 63 characters long&quot;
      label_begins_or_ends_with_hyphen: &quot;label begins or ends with a hyphen&quot;
      hostname_label_is_numeric: &quot;unqualified hostname part cannot consist of numeric values only&quot;
      single_numeric_hostname_label: &quot;hostnames cannot consist of a single numeric label&quot;
      label_contains_invalid_characters: &quot;label contains invalid characters (valid characters: [%{valid_chars}])&quot;
      invalid_hostname_length: &quot;hostname must be between 1 and 255 characters long&quot;
      tld_is_invalid: &quot;tld of hostname is invalid&quot;</pre>

<p>The %{valid_chars} signifies the range of valid characters allowed in
labels.</p>

<p>It is highly recommended you use the I18n system for error messages.</p>

<h2>Maintainers</h2>
<ul><li>
<p><a href="http://<jasen@jasen.dk>“>Kim Nørgaard</a></p>
</li></ul>

<h2>License</h2>

<p>Copyright © 2009-2011 Kim Norgaard, released under the MIT license</p>

  </div>

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>
</body>
</html>

